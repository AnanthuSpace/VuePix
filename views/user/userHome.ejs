<%- include("../partials/userHeader") %>


    <section class="home-slider position-relative pt-70 pb-50">
        <div class="swiper-container">
            <div class="swiper-wrapper">
                <% for (let i=0; i < banner.length; i++) { %>
                    <div class="swiper-slide">
                        <div class="single-hero-slider single-animation-wrap">
                            <div class="container">
                                <div class="row align-items-center slider-animated-1">
                                    <div class="col-lg-12">
                                        <div class="single-slider-img single-slider-img-1">
                                            <!-- Place your banner image here -->
                                            <img class="animated slider-1-<%= i + 1 %>"
                                                src="/uploads/products/<%= banner[i].image %>" alt=""
                                                style="width: 100%; height: auto;">
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <% } %>
            </div>
            <div class="swiper-pagination"></div>
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
    </section>

    <!-- <section class="home-slider position-relative pt-50">
        <div class="hero-slider-1 dot-style-1 dot-style-1-position-1">
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Trade-in offer</h4>
                                <h2 class="animated fw-900">Supper value deals</h2>
                                <h1 class="animated fw-900 text-brand">On all products</h1>
                                <p class="animated">Save more with coupons & up to 70% off</p>
                                <a class="animated btn btn-brush btn-brush-3" href="shop"> Shop
                                    Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-1" src="assets/imgs/slider/slider-1.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Hot promotions</h4>
                                <h2 class="animated fw-900">Fashion Trending</h2>
                                <h1 class="animated fw-900 text-7">Great Collection</h1>
                                <p class="animated">Save more with coupons & up to 20% off</p>
                                <a class="animated btn btn-brush btn-brush-2" href="shop">
                                    Discover Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-2" src="assets/imgs/slider/slider-2.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <div class="single-hero-slider single-animation-wrap">
                <div class="container">
                    <div class="row align-items-center slider-animated-1">
                        <div class="col-lg-5 col-md-6">
                            <div class="hero-slider-content-2">
                                <h4 class="animated">Upcoming Offer</h4>
                                <h2 class="animated fw-900">Big Deals From</h2>
                                <h1 class="animated fw-900 text-8">Manufacturer</h1>
                                <p class="animated">Clothing, Shoes, Bags, Wallets...</p>
                                <a class="animated btn btn-brush btn-brush-1" href="shop"> Shop
                                    Now </a>
                            </div>
                        </div>
                        <div class="col-lg-7 col-md-6">
                            <div class="single-slider-img single-slider-img-1">
                                <img class="animated slider-1-3" src="assets/imgs/slider/slider-3.png" alt="">
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <div class="slider-arrow hero-slider-1-arrow"></div>
    </section> -->
    <!-- <section class="featured section-padding position-relative">
            <div class="container">
                <div class="row">
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-1.png" alt="">
                            <h4 class="bg-1">Free Shipping</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-2.png" alt="">
                            <h4 class="bg-3">Online Order</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-3.png" alt="">
                            <h4 class="bg-2">Save Money</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-4.png" alt="">
                            <h4 class="bg-4">Promotions</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-5.png" alt="">
                            <h4 class="bg-5">Happy Sell</h4>
                        </div>
                    </div>
                    <div class="col-lg-2 col-md-4 mb-md-3 mb-lg-0">
                        <div class="banner-features wow fadeIn animated hover-up">
                            <img src="assets/imgs/theme/icons/feature-6.png" alt="">
                            <h4 class="bg-6">24/7 Support</h4>
                        </div>
                    </div>
                </div>
            </div>
        </section> -->
    <section class="product-tabs section-padding position-relative wow fadeIn animated">
        <div class="bg-square"></div>
        <div class="container">
            <!-- <div class="tab-header">
                <ul class="nav nav-tabs" id="myTab" role="tablist">
                    <li class="nav-item" role="presentation">
                        <button class="nav-link active" id="nav-tab-one" data-bs-toggle="tab" data-bs-target="#tab-one"
                            type="button" role="tab" aria-controls="tab-one" aria-selected="true">Featured</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nav-tab-two" data-bs-toggle="tab" data-bs-target="#tab-two"
                            type="button" role="tab" aria-controls="tab-two" aria-selected="false">Popular</button>
                    </li>
                    <li class="nav-item" role="presentation">
                        <button class="nav-link" id="nav-tab-three" data-bs-toggle="tab" data-bs-target="#tab-three"
                            type="button" role="tab" aria-controls="tab-three" aria-selected="false">New
                            added</button>
                    </li>
                </ul>
                <a href="#" class="view-more d-none d-md-flex">View More<i
                        class="fi-rs-angle-double-small-right"></i></a>
            </div> -->
            <!--End nav-tabs-->
            <div class="tab-content wow fadeIn animated" id="myTabContent">
                <div class="tab-pane fade show active" id="tab-one" role="tabpanel" aria-labelledby="tab-one">
                    <div class="row product-grid-4">
                        <% for (let i=0; i < products.length; i++) { %>

                            <div class="col-lg-3 col-md-4 col-12 col-sm-6">
                                <div class="product-cart-wrap mb-30">
                                    <div class="product-img-action-wrap">
                                        <div class="product-img product-img-zoom">
                                            <a href="/productDetails?id=<%=products[i].id %>">
                                                <img class="default-img"
                                                    src="/uploads/products/<%=products[i].images[0]%>" alt="">
                                            </a>
                                        </div>
                                        <div class="product-action-1">
                                            <!-- <a aria-label="Quick view" class="action-btn hover-up"
                                                data-bs-toggle="modal" data-bs-target="#quickViewModal">
                                                <i class="fi-rs-search"></i></a> -->
                                            <a aria-label="Add To Wishlist" class="action-btn hover-up" href=""
                                                onclick="addToWishlist('<%= products[i]._id %>')"><i
                                                    class="fi-rs-heart"></i></a>
                                        </div>
                                        <div class="product-badges product-badges-position product-badges-mrg">
                                            <span class="hot">New</span>
                                        </div>
                                    </div>
                                    <div class="product-content-wrap">

                                        <h2><a href="products-product-right.html"><%-products[i].name%></a></h2>
                                        <!-- <div class="rating-result" title="90%">
                                                <span>
                                                    <span>90%</span>
                                                </span>
                                            </div> -->
                                        <div class="product-price">
                                            <span>₹<%-products[i].salesPrice.toLocaleString('en-IN')%> </span>
                                            <span
                                                class="old-price">₹<%-products[i].regularPrice.toLocaleString('en-IN')%></span>&nbsp;

                                            <span class="save-price  font-md color3 ml-15"><%-products[i].productOffer
                                                    || products[i].categoryOffer %>%</span>
                                        </div>
                                        <div class="product-action-1 show">
                                            <a aria-label="Add To Cart" class="action-btn hover-up"
                                                onclick="addToCart('<%=products[i].id%>', 1, '<%=products[i].unit%>')"><i
                                                    class="fi-rs-shopping-bag-add"></i></a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <% } %>
                    </div>
                </div>
            </div>

        </div>

        </div>

        </div>

    </section>


    <script src="https://unpkg.com/swiper/swiper-bundle.min.js"></script>

    <script>
        var swiper = new Swiper('.swiper-container', {
            slidesPerView: 1,
            spaceBetween: 10,
            navigation: {
                nextEl: '.swiper-button-next',
                prevEl: '.swiper-button-prev',
            },
            pagination: {
                el: '.swiper-pagination',
                clickable: true,
            },
        });
    </script>




    <script>

        function submitOtp() {
            let id = products[i].id
            console.log(id);
            const errorMessageElement = document.getElementById('errorMessage');

            // alert(otp)
            $.ajax({
                url: "/cart",
                method: "post",
                data: {
                    otp
                },
                success: (response) => {
                    console.log(response);
                    if (response.status == true) {
                        // alert("success here")
                        location.href = "/home";
                    } else if (response.status == false) {
                        errorMessageElement.innerHTML = 'Entered OTP is incorrect';
                        errorMessageElement.style.display = 'block';


                        setTimeout(() => {
                            errorMessageElement.style.display = 'none';
                        }, 3000);

                        setTimeout(() => {
                            errorMessageElement.innerHTML = '';
                        }, 3000);
                    }
                }
            })
        }

        function addToWishlist(productId) {
            $.ajax({
                url: "/addToWishlist",
                method: "post",
                data: {
                    productId: productId
                },
                success: (response) => {
                    if (response.status == true) {
                        Swal.fire({
                            title: 'Added to Wishlist!',
                            text: 'Continue Shopping',
                            icon: 'success',
                            timer: 2000,
                            showConfirmButton: false
                        }).then(() => { location.href = '/VuePix' });
                    } else if (response.status == false) {
                        Swal.fire({
                            title: 'You need to Login first',
                            text: 'Continue Shopping',
                            icon: 'warning',
                            timer: 2000,
                            showConfirmButton: false
                        }).then(() => { location.href = '/login' });
                    }
                }
            })
            return false;
        }


        function addToCart(proId, unit, stock) {
            // console.log(proId, stock);
            if (stock <= 0) {
                Swal.fire({
                    title: 'STOCK!',
                    text: 'Quantity exceed the unit the in cart.',
                    icon: 'error',
                    timer: 5000
                })
                return;
            }

            // const quantity = 1

            $.ajax({
                url: `/cart`,
                method: 'post',
                data: {
                    id: proId,
                    unit: unit,
                },
                success(response) {
                    if (response.added == true) {
                        Swal.fire({
                            title: 'CART',
                            text: 'Product ADDED TO CART.',
                            icon: 'success',
                            timer: 5000
                        }).then(() => { location.href = '/VuePix' });
                    } else if (response.added == false) {
                        Swal.fire({
                            title: 'STOCK!',
                            text: 'Product is out of stock.',
                            icon: 'error',
                            timer: 5000
                        })
                    } else {
                        location.href = '/login'
                    }
                }
            })
        }


    </script>






    <%- include("../partials/userFooter") %>